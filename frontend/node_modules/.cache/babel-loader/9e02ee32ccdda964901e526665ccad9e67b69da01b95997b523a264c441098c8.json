{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import UserForm from\"./UserForm\";import axios from\"axios\";import{useNavigate}from\"react-router-dom\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CreateMaster=()=>{const navigate=useNavigate();const[checkMaster,setCheckMaster]=useState(null);const[authorizedUser,setAuthorizedUser]=useState(null);const authKey=localStorage.getItem(\"jwt\");const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/admin/register-master\":\"https://khamco-shop-backend.onrender.com/admin/register-master\";const[firstName,setFirstName]=useState(\"\");const[lastName,setLastName]=useState(\"\");const[role,setRole]=useState(\"\");const[language,setLanguage]=useState(\"\");const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");useEffect(()=>{document.title=\"Master User Registration - Khamco Shop\";},[]);const createMaster=async e=>{e.preventDefault();await axios.post(apiUrl,{name:firstName,surname:lastName,email:email,role:role,language:language,password:password,password2:confirmPassword},{headers:{Authorization:\"Bearer \".concat(authKey)}}).then(response=>{toast(response.data.message);setAuthorizedUser(response.data.authorizedUser);setCheckMaster(response.data.checkMaster);navigate(\"/\");}).catch(error=>{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);console.error(error);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"New Master Admin\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"flex flex-col justify-center items-center w-[90vw]\",onSubmit:createMaster,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-row\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"alert\",children:[\"There can only be one \",/*#__PURE__*/_jsx(\"strong\",{children:\"Master Administrator\"}),\". A user with these privileges has access to all resources.\",\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user-plus\"})]})}),/*#__PURE__*/_jsx(UserForm,{checkMaster:checkMaster,authorizedUser:authorizedUser,setFirstName:setFirstName,setLastName:setLastName,setRole:setRole,setLanguage:setLanguage,setEmail:setEmail,setPassword:setPassword,setConfirmPassword:setConfirmPassword})]})]})})]});};export default CreateMaster;","map":{"version":3,"names":["React","useEffect","useState","Navbar","UserForm","axios","useNavigate","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CreateMaster","navigate","checkMaster","setCheckMaster","authorizedUser","setAuthorizedUser","authKey","localStorage","getItem","apiUrl","window","location","origin","includes","firstName","setFirstName","lastName","setLastName","role","setRole","language","setLanguage","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","document","title","createMaster","e","preventDefault","post","name","surname","password2","headers","Authorization","concat","then","response","data","message","catch","error","_error$response","_error$response$data","console","children","className","onSubmit"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/users/CreateMaster.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport UserForm from \"./UserForm\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst CreateMaster = () => {\r\n  const navigate = useNavigate();\r\n  const [checkMaster, setCheckMaster] = useState(null);\r\n  const [authorizedUser, setAuthorizedUser] = useState(null);\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/admin/register-master\"\r\n    : \"https://khamco-shop-backend.onrender.com/admin/register-master\";\r\n  const [firstName, setFirstName] = useState(\"\");\r\n  const [lastName, setLastName] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n  const [language, setLanguage] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    document.title = \"Master User Registration - Khamco Shop\";\r\n  }, []);\r\n\r\n  const createMaster = async (e) => {\r\n    e.preventDefault();\r\n    await axios\r\n      .post(apiUrl, {\r\n        name: firstName, surname: lastName, email: email, role: role, language: language, password: password, password2: confirmPassword\r\n      }, {\r\n        headers: {Authorization: `Bearer ${authKey}`}\r\n      })\r\n      .then((response) => {\r\n        toast(response.data.message);\r\n        setAuthorizedUser(response.data.authorizedUser);\r\n        setCheckMaster(response.data.checkMaster);\r\n        navigate(\"/\");\r\n      })\r\n      .catch((error) => {\r\n        toast.error(error.response?.data?.message || error.message);\r\n        console.error(error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main>\r\n        <section>\r\n          <h1 className=\"title\">New Master Admin</h1>\r\n          <form\r\n            className=\"flex flex-col justify-center items-center w-[90vw]\"\r\n            onSubmit={createMaster}\r\n          >\r\n            <div className=\"form-row\">\r\n              <p className=\"alert\">\r\n                There can only be one <strong>Master Administrator</strong>. A\r\n                user with these privileges has access to all resources.{\" \"}\r\n                <i className=\"fas fa-user-plus\"></i>\r\n              </p>\r\n            </div>\r\n            <UserForm\r\n              checkMaster={checkMaster}\r\n              authorizedUser={authorizedUser}\r\n              setFirstName={setFirstName}\r\n              setLastName={setLastName}\r\n              setRole={setRole}\r\n              setLanguage={setLanguage}\r\n              setEmail={setEmail}\r\n              setPassword={setPassword}\r\n              setConfirmPassword={setConfirmPassword}\r\n            />\r\n          </form>\r\n        </section>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateMaster;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}