{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import AdminPanel from\"../../components/AdminPanel\";import Footer from\"../../components/Footer\";import axios from\"axios\";import{toast}from\"react-toastify\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AdminInvoiceData=()=>{const[invoiceData,setInvoiceData]=useState([]);const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/admin/invoice_data\":\"https://khamco-shop-backend.onrender.com/admin/invoice_data\";const[isLoading,setIsLoading]=useState(true);const[display,setDisplay]=useState(false);const authKey=localStorage.getItem(\"jwt\");const navigate=useNavigate();useEffect(()=>{document.title=\"Admin Invoice Data - Khamco Shop\";const fetchInvoiceData=async()=>{await axios.get(apiUrl,{headers:{Authorization:\"Bearer \".concat(authKey)}}).then(response=>{setInvoiceData(response.data.invoice_data);setIsLoading(false);setDisplay(true);}).catch(error=>{setDisplay(false);setIsLoading(true);if(error.response.status===403){toast.warn(\"You are not authorized to access that page\");navigate(\"/\");}else{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}return;});};return()=>{fetchInvoiceData();};},[apiUrl,authKey,navigate]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsx(AdminPanel,{}),/*#__PURE__*/_jsxs(\"section\",{className:\"admin-dashboard\",children:[isLoading&&/*#__PURE__*/_jsxs(\"table\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:\"Loading...\"})})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"bg-[#aaa] animate-pulse text-[#aaa] h-12\",children:/*#__PURE__*/_jsx(\"td\",{children:\"k\"})}),/*#__PURE__*/_jsx(\"tr\",{className:\"bg-[#aaa] animate-pulse text-[#aaa] h-12\",children:/*#__PURE__*/_jsx(\"td\",{children:\"k\"})}),/*#__PURE__*/_jsx(\"tr\",{className:\"bg-[#aaa] animate-pulse text-[#aaa] h-12\",children:/*#__PURE__*/_jsx(\"td\",{children:\"k\"})})]})]}),display&&/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"caption\",{children:\"Recent Invoice Data\"}),/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Customer\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Invoices Created\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Invoices Deleted\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:invoiceData&&invoiceData.map((entry,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{children:[entry.customer_name,\" \",entry.customer_surname]}),/*#__PURE__*/_jsx(\"td\",{children:new Date(entry.date).toLocaleDateString(\"en-US\",{month:\"long\",day:\"numeric\",year:\"numeric\"})}),/*#__PURE__*/_jsx(\"td\",{children:entry.total_invoices_created}),/*#__PURE__*/_jsx(\"td\",{children:entry.total_invoices_deleted})]},index))})]})]})]}),/*#__PURE__*/_jsx(Footer,{})]});};export default AdminInvoiceData;","map":{"version":3,"names":["React","useEffect","useState","Navbar","AdminPanel","Footer","axios","toast","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AdminInvoiceData","invoiceData","setInvoiceData","apiUrl","window","location","origin","includes","isLoading","setIsLoading","display","setDisplay","authKey","localStorage","getItem","navigate","document","title","fetchInvoiceData","get","headers","Authorization","concat","then","response","data","invoice_data","catch","error","status","warn","_error$response","_error$response$data","message","children","className","map","entry","index","customer_name","customer_surname","Date","date","toLocaleDateString","month","day","year","total_invoices_created","total_invoices_deleted"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/admin/AdminInvoiceData.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport AdminPanel from \"../../components/AdminPanel\";\r\nimport Footer from \"../../components/Footer\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst AdminInvoiceData = () => {\r\n  const [invoiceData, setInvoiceData] = useState([]);\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/admin/invoice_data\"\r\n    : \"https://khamco-shop-backend.onrender.com/admin/invoice_data\";\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [display, setDisplay] = useState(false);\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    document.title = \"Admin Invoice Data - Khamco Shop\";\r\n    const fetchInvoiceData = async () => {\r\n      await axios\r\n        .get(apiUrl, {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        })\r\n        .then((response) => {\r\n          setInvoiceData(response.data.invoice_data);\r\n          setIsLoading(false);\r\n          setDisplay(true);\r\n        })\r\n        .catch((error) => {\r\n          setDisplay(false);\r\n          setIsLoading(true);\r\n          if (error.response.status === 403) {\r\n            toast.warn(\"You are not authorized to access that page\");\r\n            navigate(\"/\");\r\n          } else {\r\n            toast.error(error.response?.data?.message || error.message);\r\n          }\r\n          return;\r\n        });\r\n    };\r\n\r\n    return () => {\r\n      fetchInvoiceData();\r\n    };\r\n  }, [apiUrl, authKey, navigate]);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main>\r\n        <AdminPanel />\r\n        <section className=\"admin-dashboard\">\r\n          {isLoading && (\r\n            <table className=\"text-center\">\r\n              <thead>\r\n                <tr>\r\n                  <td>Loading...</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr className=\"bg-[#aaa] animate-pulse text-[#aaa] h-12\"><td>k</td></tr>\r\n                <tr className=\"bg-[#aaa] animate-pulse text-[#aaa] h-12\"><td>k</td></tr>\r\n                <tr className=\"bg-[#aaa] animate-pulse text-[#aaa] h-12\"><td>k</td></tr>\r\n              </tbody>\r\n            </table>\r\n          )}\r\n          {display && (\r\n            <table>\r\n              <caption>Recent Invoice Data</caption>\r\n              <thead>\r\n                <tr>\r\n                  <td>Customer</td>\r\n                  <td>Date</td>\r\n                  <td>Invoices Created</td>\r\n                  <td>Invoices Deleted</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {invoiceData &&\r\n                  invoiceData.map((entry, index) => (\r\n                    <tr key={index}>\r\n                      <td>\r\n                        {entry.customer_name} {entry.customer_surname}\r\n                      </td>\r\n                      <td>\r\n                        {new Date(entry.date).toLocaleDateString(\"en-US\", {\r\n                          month: \"long\",\r\n                          day: \"numeric\",\r\n                          year: \"numeric\",\r\n                        })}\r\n                      </td>\r\n                      <td>{entry.total_invoices_created}</td>\r\n                      <td>{entry.total_invoices_deleted}</td>\r\n                    </tr>\r\n                  ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AdminInvoiceData;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}