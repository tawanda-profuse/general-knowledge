{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import Footer from\"../../components/Footer\";import{Link,useNavigate,useParams}from\"react-router-dom\";import axios from\"axios\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ServicesView=()=>{const{id}=useParams();const[service,setService]=useState({});const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/services\":\"https://khamco-shop-backend.onrender.com/services\";const authKey=localStorage.getItem(\"jwt\");const[loading,setLoading]=useState(false);const navigate=useNavigate();useEffect(()=>{document.title=\"Service Details - Khamco Shop\";const fetchService=async()=>{try{const response=await axios.get(\"\".concat(apiUrl,\"/\").concat(id),{headers:{Authorization:\"Bearer \".concat(authKey)}});setService(response.data.service);setLoading(false);}catch(error){setLoading(false);setService({});toast.error(error.message);}};fetchService();},[apiUrl,authKey]);const handleDelete=async serviceId=>{try{const response=await axios.delete(\"\".concat(apiUrl,\"/\").concat(serviceId),{headers:{Authorization:\"Bearer \".concat(authKey)}});toast.success(response.data.message);navigate(\"/services\");}catch(error){var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{className:\"p-[4rem]\",children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\",children:/*#__PURE__*/_jsxs(Link,{to:\"/services\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" Services\"]})}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),service&&/*#__PURE__*/_jsxs(\"div\",{className:\"khamco-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"utilities\",children:[/*#__PURE__*/_jsx(Link,{to:\"/services/edit/\".concat(service._id),className:\"edit-btn\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDelete(service._id),children:\"Delete\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:service.service}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-[1rem]\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"KWD \",new Intl.NumberFormat(\"en-US\").format(service.price)||\"--\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date Entered\"}),/*#__PURE__*/_jsx(\"p\",{className:\"capitalize\",children:new Date(service.date).toLocaleDateString(\"en-us\",{month:\"long\",year:\"numeric\",day:\"numeric\"})||\"--\"})]})]})]})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default ServicesView;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Footer","Link","useNavigate","useParams","axios","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ServicesView","id","service","setService","apiUrl","window","location","origin","includes","authKey","localStorage","getItem","loading","setLoading","navigate","document","title","fetchService","response","get","concat","headers","Authorization","data","error","message","handleDelete","serviceId","delete","success","_error$response","_error$response$data","children","className","to","_id","onClick","Intl","NumberFormat","format","price","Date","date","toLocaleDateString","month","year","day"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/services/ServicesView.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Footer from \"../../components/Footer\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst ServicesView = () => {\r\n  const { id } = useParams();\r\n  const [service, setService] = useState({});\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/services\"\r\n    : \"https://khamco-shop-backend.onrender.com/services\";\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    document.title = \"Service Details - Khamco Shop\";\r\n\r\n    const fetchService = async () => {\r\n      try {\r\n        const response = await axios.get(`${apiUrl}/${id}`, {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        });\r\n        setService(response.data.service);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        setLoading(false);\r\n        setService({});\r\n        toast.error(error.message);\r\n      }\r\n    };\r\n\r\n    fetchService();\r\n  }, [apiUrl, authKey]);\r\n\r\n  const handleDelete = async (serviceId) => {\r\n    try {\r\n      const response = await axios.delete(`${apiUrl}/${serviceId}`, {\r\n        headers: { Authorization: `Bearer ${authKey}` },\r\n      });\r\n      toast.success(response.data.message);\r\n      navigate(\"/services\");\r\n    } catch (error) {\r\n      toast.error(error.response?.data?.message || error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"p-[4rem]\">\r\n        <section>\r\n          <div className=\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\">\r\n            <Link to=\"/services\">\r\n              <i className=\"fas fa-arrow-left\"></i> Services\r\n            </Link>\r\n          </div>\r\n          {loading && <div>Loading...</div>}\r\n          {service && (\r\n            <div className=\"khamco-card\">\r\n              <div className=\"utilities\">\r\n                <Link to={`/services/edit/${service._id}`} className=\"edit-btn\">\r\n                  Edit\r\n                </Link>\r\n                <button\r\n                  className=\"delete-btn\"\r\n                  onClick={() => handleDelete(service._id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n              <h1 className=\"title\">{service.service}</h1>\r\n              <div className=\"flex flex-col gap-[1rem]\">\r\n                <span className=\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\">\r\n                  <strong>Price</strong>\r\n                  <p>KWD {new Intl.NumberFormat(\"en-US\").format(service.price) || \"--\"}</p>\r\n                </span>\r\n                <span className=\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\">\r\n                  <strong>Date Entered</strong>\r\n                  <p className=\"capitalize\">\r\n                    {new Date(service.date).toLocaleDateString(\"en-us\", {\r\n                      month: \"long\",\r\n                      year: \"numeric\",\r\n                      day: \"numeric\",\r\n                    }) || \"--\"}\r\n                  </p>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ServicesView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}