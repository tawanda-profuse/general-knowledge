{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import Footer from\"../../components/Footer\";import ProductsForm from\"./ProductsForm\";import{Link,useNavigate,useParams}from\"react-router-dom\";import axios from\"axios\";import{toast}from\"react-toastify\";import{useStoreState}from\"easy-peasy\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Edit=()=>{const{id}=useParams();const[writingDirection,setWritingDirection]=useState(\"ltr\");const userLanguage=useStoreState(state=>state.userLanguage);const[productName,setProductName]=useState(\"\");const[productQuantity,setProductQuantity]=useState(\"\");const[productCategory,setProductCategory]=useState(\"\");const[productPhoto,setProductPhoto]=useState(\"\");const[productPrice,setProductPrice]=useState(\"\");const[productDate,setProductDate]=useState(\"\");const[product,setProduct]=useState({});const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/products/\".concat(id):\"https://khamco-shop-backend.onrender.com/products/\".concat(id);const authKey=localStorage.getItem(\"jwt\");const[loading,setLoading]=useState(false);const navigate=useNavigate();useEffect(()=>{document.title=\"Edit Product Details -  Khamco Shop\";const fetchProduct=async()=>{try{const response=await axios.get(apiUrl,{headers:{Authorization:\"Bearer \".concat(authKey)}});setProductName(response.data.product.name);setProductQuantity(response.data.product.quantity);setProductCategory(response.data.product.category);setProductPhoto(response.data.product.photo);setProductPrice(response.data.product.price);setProductDate(response.data.product.date);setProduct(response.data.product);}catch(error){var _error$response,_error$response$data;setProduct([]);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}};fetchProduct();const determineWritingDirection=()=>{if(userLanguage===\"ar\"||userLanguage===\"ur\"){setWritingDirection(\"rtl\");}};determineWritingDirection();},[apiUrl,authKey,userLanguage]);const handleSubmit=async event=>{event.preventDefault();setLoading(true);await axios.put(apiUrl,{name:productName,quantity:productQuantity,category:productCategory,cover:productPhoto,price:productPrice,date:productDate},{headers:{Authorization:\"Bearer \".concat(authKey)}}).then(response=>{toast.success(response.data.message);navigate(\"/products/\".concat(response.data.product._id));setLoading(false);}).catch(error=>{var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message);setLoading(false);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"p-[4rem] grid justify-center items-center\",dir:writingDirection,children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\",children:/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(product._id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" \",product.name]})}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Edit Product Details\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col justify-center items-center w-[90vw]\",children:/*#__PURE__*/_jsx(ProductsForm,{setProductName:setProductName,setProductQuantity:setProductQuantity,setProductCategory:setProductCategory,setProductPhoto:setProductPhoto,setProductPrice:setProductPrice,setProductDate:setProductDate,productName:productName,productQuantity:productQuantity,productCategory:productCategory,productPhoto:productPhoto,productPrice:productPrice,productDate:productDate,loading:loading})})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Edit;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Footer","ProductsForm","Link","useNavigate","useParams","axios","toast","useStoreState","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Edit","id","writingDirection","setWritingDirection","userLanguage","state","productName","setProductName","productQuantity","setProductQuantity","productCategory","setProductCategory","productPhoto","setProductPhoto","productPrice","setProductPrice","productDate","setProductDate","product","setProduct","apiUrl","window","location","origin","includes","concat","authKey","localStorage","getItem","loading","setLoading","navigate","document","title","fetchProduct","response","get","headers","Authorization","data","name","quantity","category","photo","price","date","error","_error$response","_error$response$data","message","determineWritingDirection","handleSubmit","event","preventDefault","put","cover","then","success","_id","catch","_error$response2","_error$response2$data","children","className","dir","to","onSubmit"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/products/EditProduct.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Footer from \"../../components/Footer\";\r\nimport ProductsForm from \"./ProductsForm\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useStoreState } from \"easy-peasy\";\r\n\r\nconst Edit = () => {\r\n  const { id } = useParams();\r\n  const [writingDirection, setWritingDirection] = useState(\"ltr\");\r\n  const userLanguage = useStoreState((state) => state.userLanguage);\r\n  const [productName, setProductName] = useState(\"\");\r\n  const [productQuantity, setProductQuantity] = useState(\"\");\r\n  const [productCategory, setProductCategory] = useState(\"\");\r\n  const [productPhoto, setProductPhoto] = useState(\"\");\r\n  const [productPrice, setProductPrice] = useState(\"\");\r\n  const [productDate, setProductDate] = useState(\"\");\r\n  const [product, setProduct] = useState({});\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? `http://localhost:5000/products/${id}`\r\n    : `https://khamco-shop-backend.onrender.com/products/${id}`;\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    document.title = \"Edit Product Details -  Khamco Shop\";\r\n\r\n    const fetchProduct = async () => {\r\n      try {\r\n        const response = await axios.get(apiUrl, {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        });\r\n        setProductName(response.data.product.name);\r\n        setProductQuantity(response.data.product.quantity);\r\n        setProductCategory(response.data.product.category);\r\n        setProductPhoto(response.data.product.photo);\r\n        setProductPrice(response.data.product.price);\r\n        setProductDate(response.data.product.date);\r\n        setProduct(response.data.product);\r\n      } catch (error) {\r\n        setProduct([]);\r\n        toast.error(error.response?.data?.message || error.message);\r\n      }\r\n    };\r\n\r\n    fetchProduct();\r\n\r\n    const determineWritingDirection = () => {\r\n      if (userLanguage === \"ar\" || userLanguage === \"ur\") {\r\n        setWritingDirection(\"rtl\");\r\n      }\r\n    };\r\n    determineWritingDirection();\r\n  }, [apiUrl, authKey, userLanguage]);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n\r\n    await axios\r\n      .put(\r\n        apiUrl,\r\n        {\r\n          name: productName,\r\n          quantity: productQuantity,\r\n          category: productCategory,\r\n          cover: productPhoto,\r\n          price: productPrice,\r\n          date: productDate,\r\n        },\r\n        {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        }\r\n      )\r\n      .then((response) => {\r\n        toast.success(response.data.message);\r\n        navigate(`/products/${response.data.product._id}`);\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        toast.error(error.response?.data?.message || error.message);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main>\r\n        <section\r\n          className=\"p-[4rem] grid justify-center items-center\"\r\n          dir={writingDirection}\r\n        >\r\n          <div className=\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\">\r\n            <Link to={`/products/${product._id}`}>\r\n              <i className=\"fas fa-arrow-left\"></i> {product.name}\r\n            </Link>\r\n          </div>\r\n          <h1 className=\"title\">Edit Product Details</h1>\r\n          <form\r\n            onSubmit={handleSubmit}\r\n            className=\"flex flex-col justify-center items-center w-[90vw]\"\r\n          >\r\n            <ProductsForm\r\n              setProductName={setProductName}\r\n              setProductQuantity={setProductQuantity}\r\n              setProductCategory={setProductCategory}\r\n              setProductPhoto={setProductPhoto}\r\n              setProductPrice={setProductPrice}\r\n              setProductDate={setProductDate}\r\n              productName={productName}\r\n              productQuantity={productQuantity}\r\n              productCategory={productCategory}\r\n              productPhoto={productPhoto}\r\n              productPrice={productPrice}\r\n              productDate={productDate}\r\n              loading={loading}\r\n            />\r\n          </form>\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Edit;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAC5C,MAAO,CAAAC,MAAM,KAAM,yBAAyB,CAC5C,MAAO,CAAAC,YAAY,KAAM,gBAAgB,CACzC,OAASC,IAAI,CAAEC,WAAW,CAAEC,SAAS,KAAQ,kBAAkB,CAC/D,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,KAAK,KAAQ,gBAAgB,CACtC,OAASC,aAAa,KAAQ,YAAY,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAE3C,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACjB,KAAM,CAAEC,EAAG,CAAC,CAAGX,SAAS,CAAC,CAAC,CAC1B,KAAM,CAACY,gBAAgB,CAAEC,mBAAmB,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC/D,KAAM,CAAAoB,YAAY,CAAGX,aAAa,CAAEY,KAAK,EAAKA,KAAK,CAACD,YAAY,CAAC,CACjE,KAAM,CAACE,WAAW,CAAEC,cAAc,CAAC,CAAGvB,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACwB,eAAe,CAAEC,kBAAkB,CAAC,CAAGzB,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAAC0B,eAAe,CAAEC,kBAAkB,CAAC,CAAG3B,QAAQ,CAAC,EAAE,CAAC,CAC1D,KAAM,CAAC4B,YAAY,CAAEC,eAAe,CAAC,CAAG7B,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAAC8B,YAAY,CAAEC,eAAe,CAAC,CAAG/B,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACgC,WAAW,CAAEC,cAAc,CAAC,CAAGjC,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAACkC,OAAO,CAAEC,UAAU,CAAC,CAAGnC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAC1C,KAAM,CAAAoC,MAAM,CAAGC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAACC,QAAQ,CAAC,WAAW,CAAC,mCAAAC,MAAA,CACrBxB,EAAE,uDAAAwB,MAAA,CACiBxB,EAAE,CAAE,CAC7D,KAAM,CAAAyB,OAAO,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CAC3C,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAG9C,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAA+C,QAAQ,CAAG1C,WAAW,CAAC,CAAC,CAE9BN,SAAS,CAAC,IAAM,CACdiD,QAAQ,CAACC,KAAK,CAAG,qCAAqC,CAEtD,KAAM,CAAAC,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAA5C,KAAK,CAAC6C,GAAG,CAAChB,MAAM,CAAE,CACvCiB,OAAO,CAAE,CAAEC,aAAa,WAAAb,MAAA,CAAYC,OAAO,CAAG,CAChD,CAAC,CAAC,CACFnB,cAAc,CAAC4B,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAACsB,IAAI,CAAC,CAC1C/B,kBAAkB,CAAC0B,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAACuB,QAAQ,CAAC,CAClD9B,kBAAkB,CAACwB,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAACwB,QAAQ,CAAC,CAClD7B,eAAe,CAACsB,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAACyB,KAAK,CAAC,CAC5C5B,eAAe,CAACoB,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAAC0B,KAAK,CAAC,CAC5C3B,cAAc,CAACkB,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAAC2B,IAAI,CAAC,CAC1C1B,UAAU,CAACgB,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAAC,CACnC,CAAE,MAAO4B,KAAK,CAAE,KAAAC,eAAA,CAAAC,oBAAA,CACd7B,UAAU,CAAC,EAAE,CAAC,CACd3B,KAAK,CAACsD,KAAK,CAAC,EAAAC,eAAA,CAAAD,KAAK,CAACX,QAAQ,UAAAY,eAAA,kBAAAC,oBAAA,CAAdD,eAAA,CAAgBR,IAAI,UAAAS,oBAAA,iBAApBA,oBAAA,CAAsBC,OAAO,GAAIH,KAAK,CAACG,OAAO,CAAC,CAC7D,CACF,CAAC,CAEDf,YAAY,CAAC,CAAC,CAEd,KAAM,CAAAgB,yBAAyB,CAAGA,CAAA,GAAM,CACtC,GAAI9C,YAAY,GAAK,IAAI,EAAIA,YAAY,GAAK,IAAI,CAAE,CAClDD,mBAAmB,CAAC,KAAK,CAAC,CAC5B,CACF,CAAC,CACD+C,yBAAyB,CAAC,CAAC,CAC7B,CAAC,CAAE,CAAC9B,MAAM,CAAEM,OAAO,CAAEtB,YAAY,CAAC,CAAC,CAEnC,KAAM,CAAA+C,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CACpCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBvB,UAAU,CAAC,IAAI,CAAC,CAEhB,KAAM,CAAAvC,KAAK,CACR+D,GAAG,CACFlC,MAAM,CACN,CACEoB,IAAI,CAAElC,WAAW,CACjBmC,QAAQ,CAAEjC,eAAe,CACzBkC,QAAQ,CAAEhC,eAAe,CACzB6C,KAAK,CAAE3C,YAAY,CACnBgC,KAAK,CAAE9B,YAAY,CACnB+B,IAAI,CAAE7B,WACR,CAAC,CACD,CACEqB,OAAO,CAAE,CAAEC,aAAa,WAAAb,MAAA,CAAYC,OAAO,CAAG,CAChD,CACF,CAAC,CACA8B,IAAI,CAAErB,QAAQ,EAAK,CAClB3C,KAAK,CAACiE,OAAO,CAACtB,QAAQ,CAACI,IAAI,CAACU,OAAO,CAAC,CACpClB,QAAQ,cAAAN,MAAA,CAAcU,QAAQ,CAACI,IAAI,CAACrB,OAAO,CAACwC,GAAG,CAAE,CAAC,CAClD5B,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACD6B,KAAK,CAAEb,KAAK,EAAK,KAAAc,gBAAA,CAAAC,qBAAA,CAChBrE,KAAK,CAACsD,KAAK,CAAC,EAAAc,gBAAA,CAAAd,KAAK,CAACX,QAAQ,UAAAyB,gBAAA,kBAAAC,qBAAA,CAAdD,gBAAA,CAAgBrB,IAAI,UAAAsB,qBAAA,iBAApBA,qBAAA,CAAsBZ,OAAO,GAAIH,KAAK,CAACG,OAAO,CAAC,CAC3DnB,UAAU,CAAC,KAAK,CAAC,CACnB,CAAC,CAAC,CACN,CAAC,CAED,mBACEjC,KAAA,CAAAE,SAAA,EAAA+D,QAAA,eACEnE,IAAA,CAACV,MAAM,GAAE,CAAC,cACVU,IAAA,SAAAmE,QAAA,cACEjE,KAAA,YACEkE,SAAS,CAAC,2CAA2C,CACrDC,GAAG,CAAE9D,gBAAiB,CAAA4D,QAAA,eAEtBnE,IAAA,QAAKoE,SAAS,CAAC,gFAAgF,CAAAD,QAAA,cAC7FjE,KAAA,CAACT,IAAI,EAAC6E,EAAE,cAAAxC,MAAA,CAAeP,OAAO,CAACwC,GAAG,CAAG,CAAAI,QAAA,eACnCnE,IAAA,MAAGoE,SAAS,CAAC,mBAAmB,CAAI,CAAC,IAAC,CAAC7C,OAAO,CAACsB,IAAI,EAC/C,CAAC,CACJ,CAAC,cACN7C,IAAA,OAAIoE,SAAS,CAAC,OAAO,CAAAD,QAAA,CAAC,sBAAoB,CAAI,CAAC,cAC/CnE,IAAA,SACEuE,QAAQ,CAAEf,YAAa,CACvBY,SAAS,CAAC,oDAAoD,CAAAD,QAAA,cAE9DnE,IAAA,CAACR,YAAY,EACXoB,cAAc,CAAEA,cAAe,CAC/BE,kBAAkB,CAAEA,kBAAmB,CACvCE,kBAAkB,CAAEA,kBAAmB,CACvCE,eAAe,CAAEA,eAAgB,CACjCE,eAAe,CAAEA,eAAgB,CACjCE,cAAc,CAAEA,cAAe,CAC/BX,WAAW,CAAEA,WAAY,CACzBE,eAAe,CAAEA,eAAgB,CACjCE,eAAe,CAAEA,eAAgB,CACjCE,YAAY,CAAEA,YAAa,CAC3BE,YAAY,CAAEA,YAAa,CAC3BE,WAAW,CAAEA,WAAY,CACzBa,OAAO,CAAEA,OAAQ,CAClB,CAAC,CACE,CAAC,EACA,CAAC,CACN,CAAC,cACPlC,IAAA,CAACT,MAAM,GAAE,CAAC,EACV,CAAC,CAEP,CAAC,CAED,cAAe,CAAAc,IAAI","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}