{"ast":null,"code":"import{Link,useParams}from\"react-router-dom\";import Navbar from\"../../components/Navbar\";import Footer from\"../../components/Footer\";import{useEffect,useState}from\"react\";import{toast}from\"react-toastify\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserProfile=()=>{const{id}=useParams();const[isLoading,setIsLoading]=useState(true);const[user,setUser]=useState({});const serverUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/admin\":\"https://khamco-shop-backend.onrender.com/admin\";const authKey=localStorage.getItem(\"jwt\");useEffect(()=>{let isMounted=true;document.title=\"Profile Management\";const fetchData=async()=>{await axios.get(\"\".concat(serverUrl,\"/users/\").concat(id),{headers:{Authorization:\"Bearer \".concat(authKey)}}).then(response=>{if(isMounted){setIsLoading(false);setUser(response.data.user);document.title=\"Profile Management - \".concat(response.data.user.name);}}).catch(error=>{if(isMounted){var _error$response,_error$response$data;setIsLoading(false);toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);return;}});};fetchData();return()=>{isMounted=false;};},[authKey,id,serverUrl]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"admin-dashboard font-arial\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"My Dashboard\"}),isLoading&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-[4rem] justify-center items-center w-[70vw] m-auto\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"metric bg-[#ccc] shadow-none animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric bg-[#ccc] shadow-none animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric bg-[#ccc] shadow-none animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"metric bg-[#ccc] shadow-none animate-pulse\"})]}),user&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"td\",{children:\"Chosen Language\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(user.name,\" \").concat(user.surname)}),/*#__PURE__*/_jsx(\"td\",{className:\"capitalize\",children:user.role}),/*#__PURE__*/_jsxs(\"td\",{children:[user.language===\"en\"&&\"English\",user.language===\"ur\"&&\"Urdu\",user.language===\"ar\"&&\"Arabic\",user.language===\"hi\"&&\"Hindi\"]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-[4rem] justify-center items-center w-[70vw] my-[6rem] m-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"metric\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-khamco-secondary text-2xl font-bold\",children:[\"User Details \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/admin/users/\".concat(id),className:\"edit-btn\",children:\"Details\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"metric\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-khamco-secondary text-2xl font-bold\",children:[\"My Orders \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bookmark\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/my-orders/\".concat(id),className:\"edit-btn\",children:\"Details\"})]})]})]})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default UserProfile;","map":{"version":3,"names":["Link","useParams","Navbar","Footer","useEffect","useState","toast","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserProfile","id","isLoading","setIsLoading","user","setUser","serverUrl","window","location","origin","includes","authKey","localStorage","getItem","isMounted","document","title","fetchData","get","concat","headers","Authorization","then","response","data","name","catch","error","_error$response","_error$response$data","message","children","className","surname","role","language","to"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/users/UserProfile.jsx"],"sourcesContent":["import { Link, useParams } from \"react-router-dom\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Footer from \"../../components/Footer\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\n\r\nconst UserProfile = () => {\r\n  const { id } = useParams();\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [user, setUser] = useState({});\r\n  const serverUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/admin\"\r\n    : \"https://khamco-shop-backend.onrender.com/admin\";\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n\r\n    document.title = \"Profile Management\";\r\n\r\n    const fetchData = async () => {\r\n      await axios\r\n        .get(`${serverUrl}/users/${id}`, {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        })\r\n        .then((response) => {\r\n          if (isMounted) {\r\n            setIsLoading(false);\r\n            setUser(response.data.user);\r\n            document.title = `Profile Management - ${response.data.user.name}`;\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          if (isMounted) {\r\n            setIsLoading(false);\r\n            toast.error(error.response?.data?.message || error.message);\r\n            return;\r\n          }\r\n        });\r\n    };\r\n\r\n    fetchData();\r\n\r\n    return () => {\r\n      isMounted = false;\r\n    };\r\n  }, [authKey, id, serverUrl]);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main>\r\n        <section className=\"admin-dashboard font-arial\">\r\n          <h1 className=\"title\">My Dashboard</h1>\r\n          {isLoading && (\r\n            <div className=\"grid md:grid-cols-2 gap-[4rem] justify-center items-center w-[70vw] m-auto\">\r\n              <div className=\"metric bg-[#ccc] shadow-none animate-pulse\"></div>\r\n              <div className=\"metric bg-[#ccc] shadow-none animate-pulse\"></div>\r\n              <div className=\"metric bg-[#ccc] shadow-none animate-pulse\"></div>\r\n              <div className=\"metric bg-[#ccc] shadow-none animate-pulse\"></div>\r\n            </div>\r\n          )}\r\n          {user && (\r\n            <>\r\n              <table>\r\n                <thead>\r\n                  <tr>\r\n                    <td>Name</td>\r\n                    <td>Role</td>\r\n                    <td>Chosen Language</td>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  <tr>\r\n                    <td>{`${user.name} ${user.surname}`}</td>\r\n                    <td className=\"capitalize\">{user.role}</td>\r\n                    <td>\r\n                      {user.language === \"en\" && \"English\"}\r\n                      {user.language === \"ur\" && \"Urdu\"}\r\n                      {user.language === \"ar\" && \"Arabic\"}\r\n                      {user.language === \"hi\" && \"Hindi\"}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n              <div className=\"grid md:grid-cols-2 gap-[4rem] justify-center items-center w-[70vw] my-[6rem] m-auto\">\r\n                <div className=\"metric\">\r\n                  <h2 className=\"text-khamco-secondary text-2xl font-bold\">\r\n                    User Details <i className=\"fas fa-user\"></i>\r\n                  </h2>\r\n                  <Link to={`/admin/users/${id}`} className=\"edit-btn\">\r\n                    Details\r\n                  </Link>\r\n                </div>\r\n                <div className=\"metric\">\r\n                  <h2 className=\"text-khamco-secondary text-2xl font-bold\">\r\n                    My Orders <i className=\"fas fa-bookmark\"></i>\r\n                  </h2>\r\n                  <Link to={`/my-orders/${id}`} className=\"edit-btn\">\r\n                    Details\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserProfile;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}