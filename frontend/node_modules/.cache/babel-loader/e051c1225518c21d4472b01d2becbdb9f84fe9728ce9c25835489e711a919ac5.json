{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import Footer from\"../../components/Footer\";import ProductsForm from\"./ProductsForm\";import{Link,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const NewProduct=()=>{const[writingDirection,setWritingDirection]=useState(\"ltr\");const[productName,setProductName]=useState(\"\");const[productQuantity,setProductQuantity]=useState(\"\");const[productCategory,setProductCategory]=useState(\"\");const[productPhoto,setProductPhoto]=useState(\"\");const[productPrice,setProductPrice]=useState(\"\");const[productDate,setProductDate]=useState(\"\");const navigate=useNavigate();const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/products\":\"https://khamco-shop-backend.onrender.com/products\";const authKey=localStorage.getItem(\"jwt\");const[loading,setLoading]=useState(false);useEffect(()=>{document.title=\"Enter Product Details Khamco Shop Home\";},[]);const handleSubmit=async event=>{event.preventDefault();setLoading(true);const formData=new FormData();formData.append(\"name\",productName);formData.append(\"quantity\",productQuantity);formData.append(\"category\",productCategory);formData.append(\"cover\",productPhoto);formData.append(\"price\",productPrice);formData.append(\"date\",productDate);await axios.post(apiUrl,formData,{headers:{Authorization:\"Bearer \".concat(authKey)},\"Content-Type\":\"multipart/form-data\"}).then(response=>{toast.success(response.data.message);navigate(\"/products/\".concat(response.data.product._id));setLoading(false);}).catch(error=>{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);setLoading(false);});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsxs(\"section\",{className:\"p-[4rem] grid justify-center items-center\",dir:writingDirection,children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\",children:/*#__PURE__*/_jsxs(Link,{to:\"/products\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" All Products\"]})}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Add New Product\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:\"flex flex-col justify-center items-center w-[90vw]\",children:/*#__PURE__*/_jsx(ProductsForm,{setProductName:setProductName,setProductQuantity:setProductQuantity,setProductCategory:setProductCategory,setProductPhoto:setProductPhoto,setProductPrice:setProductPrice,setProductDate:setProductDate,date:productDate,loading:loading})})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default NewProduct;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Footer","ProductsForm","Link","useNavigate","axios","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","NewProduct","writingDirection","setWritingDirection","productName","setProductName","productQuantity","setProductQuantity","productCategory","setProductCategory","productPhoto","setProductPhoto","productPrice","setProductPrice","productDate","setProductDate","navigate","apiUrl","window","location","origin","includes","authKey","localStorage","getItem","loading","setLoading","document","title","handleSubmit","event","preventDefault","formData","FormData","append","post","headers","Authorization","concat","then","response","success","data","message","product","_id","catch","error","_error$response","_error$response$data","children","className","dir","to","onSubmit","date"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/products/NewProduct.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Footer from \"../../components/Footer\";\r\nimport ProductsForm from \"./ProductsForm\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst NewProduct = () => {\r\n  const [writingDirection, setWritingDirection] = useState(\"ltr\");\r\n  const [productName, setProductName] = useState(\"\");\r\n  const [productQuantity, setProductQuantity] = useState(\"\");\r\n  const [productCategory, setProductCategory] = useState(\"\");\r\n  const [productPhoto, setProductPhoto] = useState(\"\");\r\n  const [productPrice, setProductPrice] = useState(\"\");\r\n  const [productDate, setProductDate] = useState(\"\");\r\n  const navigate = useNavigate();\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/products\"\r\n    : \"https://khamco-shop-backend.onrender.com/products\";\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    document.title = \"Enter Product Details Khamco Shop Home\";\r\n  }, []);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n\r\n    const formData = new FormData();\r\n    formData.append(\"name\", productName);\r\n    formData.append(\"quantity\", productQuantity);\r\n    formData.append(\"category\", productCategory);\r\n    formData.append(\"cover\", productPhoto);\r\n    formData.append(\"price\", productPrice);\r\n    formData.append(\"date\", productDate);\r\n\r\n    await axios\r\n      .post(apiUrl, formData, {\r\n        headers: { Authorization: `Bearer ${authKey}` },\r\n        \"Content-Type\": \"multipart/form-data\",\r\n      })\r\n      .then((response) => {\r\n        toast.success(response.data.message);\r\n        navigate(`/products/${response.data.product._id}`);\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        toast.error(error.response?.data?.message || error.message);\r\n        setLoading(false);\r\n      });\r\n  };\r\n  \r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main>\r\n        <section\r\n          className=\"p-[4rem] grid justify-center items-center\"\r\n          dir={writingDirection}\r\n        >\r\n          <div className=\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\">\r\n            <Link to=\"/products\">\r\n              <i className=\"fas fa-arrow-left\"></i> All Products\r\n            </Link>\r\n          </div>\r\n          <h1 className=\"title\">Add New Product</h1>\r\n          <form\r\n            onSubmit={handleSubmit}\r\n            className=\"flex flex-col justify-center items-center w-[90vw]\"\r\n          >\r\n            <ProductsForm\r\n              setProductName={setProductName}\r\n              setProductQuantity={setProductQuantity}\r\n              setProductCategory={setProductCategory}\r\n              setProductPhoto={setProductPhoto}\r\n              setProductPrice={setProductPrice}\r\n              setProductDate={setProductDate}\r\n              date={productDate}\r\n              loading={loading}\r\n            />\r\n          </form>\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NewProduct;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}