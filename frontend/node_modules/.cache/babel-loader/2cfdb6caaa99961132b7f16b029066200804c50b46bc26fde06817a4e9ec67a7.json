{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link,useParams}from\"react-router-dom\";import Navbar from\"../../../components/Navbar\";import Footer from\"../../../components/Footer\";import axios from\"axios\";import{useStoreState}from\"easy-peasy\";import{toast}from\"react-toastify\";import MeasurementList from\"./MeasurementList\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Measurements=()=>{const{id}=useParams();const userLanguage=useStoreState(state=>state.userLanguage);const[writingDirection,setWritingDirection]=useState(\"ltr\");const[customer,setCustomer]=useState(null);const[measurements,setMeasurements]=useState(null);const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/customers/\".concat(id,\"/measurements\"):\"https://khamco-shop-backend.onrender.com/customers/\".concat(id,\"/measurements\");const authKey=localStorage.getItem(\"jwt\");useEffect(()=>{const fetchData=async()=>{await axios.get(apiUrl,{headers:{Authorization:\"Bearer \".concat(authKey)}}).then(response=>{setCustomer(response.data.customer);setMeasurements(response.data.measurements);document.title=\"All Measurements for \".concat(response.data.customer.name);}).catch(error=>{var _error$response,_error$response$data;toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);});};const determineWritingDirection=()=>{if(userLanguage===\"ar\"||userLanguage===\"ur\"){setWritingDirection(\"rtl\");}else{setWritingDirection(\"ltr\");}};determineWritingDirection();fetchData();},[apiUrl,authKey,userLanguage]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(\"section\",{className:\"customer-details\",dir:writingDirection,children:customer&&measurements&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"utilities\",children:/*#__PURE__*/_jsxs(Link,{to:\"/customers/\".concat(customer._id),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" Customer\",\" \",\"\".concat(customer.name,\" \").concat(customer.surname)]})}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Measurements for \".concat(\"\".concat(customer.name,\" \").concat(customer.surname))}),/*#__PURE__*/_jsxs(\"div\",{className:\"khamco-card grid-cols-1\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"utilities\",children:/*#__PURE__*/_jsxs(Link,{to:\"/customers/\".concat(customer._id,\"/create-measurement\"),className:\"edit-btn m-auto\",children:[\"New Measurement \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"})]})}),measurements&&measurements.length>0?measurements.map((measurement,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-[2rem] w-2/4 m-auto p-[1rem] rounded-[1rem] shadow-md shadow-[#333]\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex justify-start gap-[2rem] text-balance flex-wrap\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),new Date(measurement.date_created).toLocaleDateString(\"en-us\",{month:\"long\",year:\"numeric\",day:\"numeric\"})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex justify-start gap-[2rem] text-balance flex-wrap\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Notes:\"}),/*#__PURE__*/_jsx(\"p\",{children:measurement.description})]}),/*#__PURE__*/_jsx(Link,{to:\"/customers/\".concat(customer._id,\"/measurements/\").concat(measurement._id),className:\"edit-btn w-2/4 m-auto text-center\",children:\"Details\"})]},index)):/*#__PURE__*/_jsx(\"p\",{children:\"No measurements for this customer\"})]})]})})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Measurements;","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","Navbar","Footer","axios","useStoreState","toast","MeasurementList","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Measurements","id","userLanguage","state","writingDirection","setWritingDirection","customer","setCustomer","measurements","setMeasurements","apiUrl","window","location","origin","includes","concat","authKey","localStorage","getItem","fetchData","get","headers","Authorization","then","response","data","document","title","name","catch","error","_error$response","_error$response$data","message","determineWritingDirection","children","className","dir","to","_id","surname","length","map","measurement","index","Date","date_created","toLocaleDateString","month","year","day","description"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/customers/measurements/Measurements.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useParams } from \"react-router-dom\";\r\nimport Navbar from \"../../../components/Navbar\";\r\nimport Footer from \"../../../components/Footer\";\r\nimport axios from \"axios\";\r\nimport { useStoreState } from \"easy-peasy\";\r\nimport { toast } from \"react-toastify\";\r\nimport MeasurementList from \"./MeasurementList\";\r\n\r\nconst Measurements = () => {\r\n  const { id } = useParams();\r\n  const userLanguage = useStoreState((state) => state.userLanguage);\r\n  const [writingDirection, setWritingDirection] = useState(\"ltr\");\r\n  const [customer, setCustomer] = useState(null);\r\n  const [measurements, setMeasurements] = useState(null);\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? `http://localhost:5000/customers/${id}/measurements`\r\n    : `https://khamco-shop-backend.onrender.com/customers/${id}/measurements`;\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      await axios\r\n        .get(apiUrl, {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        })\r\n        .then((response) => {\r\n          setCustomer(response.data.customer);\r\n          setMeasurements(response.data.measurements);\r\n          document.title = `All Measurements for ${response.data.customer.name}`;\r\n        })\r\n        .catch((error) => {\r\n          toast.error(error.response?.data?.message || error.message);\r\n        });\r\n    };\r\n\r\n    const determineWritingDirection = () => {\r\n      if (userLanguage === \"ar\" || userLanguage === \"ur\") {\r\n        setWritingDirection(\"rtl\");\r\n      } else {\r\n        setWritingDirection(\"ltr\");\r\n      }\r\n    };\r\n    determineWritingDirection();\r\n    \r\n    fetchData();\r\n  \r\n  }, [apiUrl, authKey, userLanguage]);\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main>\r\n        <section className=\"customer-details\" dir={writingDirection}>\r\n          {customer && measurements && (\r\n            <>\r\n              <div className=\"utilities\">\r\n                <Link to={`/customers/${customer._id}`}>\r\n                  <i className=\"fas fa-arrow-left\"></i> Customer{\" \"}\r\n                  {`${customer.name} ${customer.surname}`}\r\n                </Link>\r\n              </div>\r\n              <h1 className=\"title\">\r\n                {`Measurements for ${`${customer.name} ${customer.surname}`}`}\r\n              </h1>\r\n              <div className=\"khamco-card grid-cols-1\">\r\n                <div className=\"utilities\">\r\n                  <Link\r\n                    to={`/customers/${customer._id}/create-measurement`}\r\n                    className=\"edit-btn m-auto\"\r\n                  >\r\n                    New Measurement <i className=\"fas fa-plus\"></i>\r\n                  </Link>\r\n                </div>\r\n                {measurements && measurements.length > 0 ? (\r\n                  measurements.map((measurement, index) => (\r\n                    <div\r\n                      className=\"flex flex-col gap-[2rem] w-2/4 m-auto p-[1rem] rounded-[1rem] shadow-md shadow-[#333]\"\r\n                      key={index}\r\n                    >\r\n                      <span className=\"inline-flex justify-start gap-[2rem] text-balance flex-wrap\">\r\n                        <strong>Date:</strong>\r\n                        {new Date(measurement.date_created).toLocaleDateString(\r\n                          \"en-us\",\r\n                          {\r\n                            month: \"long\",\r\n                            year: \"numeric\",\r\n                            day: \"numeric\",\r\n                          }\r\n                        )}\r\n                      </span>\r\n                      <span className=\"inline-flex justify-start gap-[2rem] text-balance flex-wrap\">\r\n                        <strong>Notes:</strong>\r\n                        <p>{measurement.description}</p>\r\n                      </span>\r\n                      <Link\r\n                        to={`/customers/${customer._id}/measurements/${measurement._id}`}\r\n                        className=\"edit-btn w-2/4 m-auto text-center\"\r\n                      >\r\n                        Details\r\n                      </Link>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <p>No measurements for this customer</p>\r\n                )}\r\n              </div>\r\n            </>\r\n          )}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Measurements;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}