{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import Footer from\"../../components/Footer\";import{Link,useLocation,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Services=()=>{const[services,setServices]=useState([]);const[loading,setLoading]=useState(true);const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/services\":\"https://khamco-shop-backend.onrender.com/services\";const authKey=localStorage.getItem(\"jwt\");const location=useLocation();const navigate=useNavigate();const fetchServices=async function(){let queryParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"\";try{const response=await axios.get(\"\".concat(apiUrl).concat(queryParams),{headers:{Authorization:\"Bearer \".concat(authKey)}});const sortedServices=response.data.services.sort((a,b)=>new Date(a.date)-new Date(b.date));setServices(sortedServices);setLoading(false);}catch(error){setServices([]);setLoading(false);toast.error(error.message);}};useEffect(()=>{document.title=\"Services - Khamco Shop\";fetchServices(location.search);},[location.search]);const handleSearch=e=>{e.preventDefault();const form=new FormData(e.target);const searchParams=new URLSearchParams(form).toString();navigate(\"?\".concat(searchParams));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{className:\"p-[4rem]\",children:/*#__PURE__*/_jsxs(\"section\",{className:\"py-0 px-[2rem] justify-center items-center grid-cols-1 gap-[1rem]\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Services\"}),/*#__PURE__*/_jsx(\"div\",{className:\"utilities\",children:/*#__PURE__*/_jsxs(Link,{to:\"/services/new\",children:[\"New Service \",/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"utilities\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"search-engine\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:0.01,placeholder:\"Search service price\",name:\"price\",className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-button\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-search\"})})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,className:\"search-engine\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"date\",className:\"search-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"search-button\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\"})})]})]}),loading&&/*#__PURE__*/_jsxs(\"table\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:\"Loading...\"})})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[/*#__PURE__*/_jsx(\"tr\",{className:\"bg-[#aaa] animate-pulse text-[#aaa] h-12\",children:/*#__PURE__*/_jsx(\"td\",{children:\"k\"})}),/*#__PURE__*/_jsx(\"tr\",{className:\"bg-[#aaa] animate-pulse text-[#aaa] h-12\",children:/*#__PURE__*/_jsx(\"td\",{children:\"k\"})}),/*#__PURE__*/_jsx(\"tr\",{className:\"bg-[#aaa] animate-pulse text-[#aaa] h-12\",children:/*#__PURE__*/_jsx(\"td\",{children:\"k\"})})]})]}),services.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"w-full my-[2rem] m-auto border-collapse text-[1.2rem] overflow-auto\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"text-khamco-primary font-bold\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"border-[0.2rem] border-khamco-secondary border-t-0 relative\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"bg-[#ddd] text-center\",children:\"Service\"}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-[#ddd] text-center\",children:\"Price\"}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-[#ddd] text-center\",children:\"Date Created\"}),/*#__PURE__*/_jsx(\"td\",{className:\"bg-[#ddd] text-center\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:services.map((service,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"border-[0.2rem] border-khamco-secondary border-t-0 relative\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"text-center p-[0.5rem]\",children:service.service}),/*#__PURE__*/_jsxs(\"td\",{className:\"text-center p-[0.5rem]\",children:[\"KWD \",service.price]}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center p-[0.5rem]\",children:new Date(service.date).toLocaleDateString(\"en-us\",{month:\"long\",year:\"numeric\",day:\"numeric\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"text-center p-[0.5rem]\",children:/*#__PURE__*/_jsx(Link,{to:\"/services/\".concat(service._id),children:\"View\"})})]},index))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No services available.\"})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default Services;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Footer","Link","useLocation","useNavigate","axios","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Services","services","setServices","loading","setLoading","apiUrl","window","location","origin","includes","authKey","localStorage","getItem","navigate","fetchServices","queryParams","arguments","length","undefined","response","get","concat","headers","Authorization","sortedServices","data","sort","a","b","Date","date","error","message","document","title","search","handleSearch","e","preventDefault","form","FormData","target","searchParams","URLSearchParams","toString","children","className","to","onSubmit","type","step","placeholder","name","map","service","index","price","toLocaleDateString","month","year","day","_id"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/services/Services.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Footer from \"../../components/Footer\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Services = () => {\r\n  const [services, setServices] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/services\"\r\n    : \"https://khamco-shop-backend.onrender.com/services\";\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n\r\n  const fetchServices = async (queryParams = \"\") => {\r\n    try {\r\n      const response = await axios.get(`${apiUrl}${queryParams}`, {\r\n        headers: { Authorization: `Bearer ${authKey}` },\r\n      });\r\n      const sortedServices = response.data.services.sort(\r\n        (a, b) => new Date(a.date) - new Date(b.date)\r\n      );\r\n      setServices(sortedServices);\r\n      setLoading(false);\r\n    } catch (error) {\r\n      setServices([]);\r\n      setLoading(false);\r\n      toast.error(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    document.title = \"Services - Khamco Shop\";\r\n    fetchServices(location.search);\r\n  }, [location.search]);\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    const form = new FormData(e.target);\r\n    const searchParams = new URLSearchParams(form).toString();\r\n    navigate(`?${searchParams}`);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"p-[4rem]\">\r\n        <section className=\"py-0 px-[2rem] justify-center items-center grid-cols-1 gap-[1rem]\">\r\n          <h1 className=\"title\">Services</h1>\r\n          <div className=\"utilities\">\r\n            <Link to=\"/services/new\">\r\n              New Service <i className=\"fas fa-plus\"></i>\r\n            </Link>\r\n          </div>\r\n          <div className=\"utilities\">\r\n            <form onSubmit={handleSearch} className=\"search-engine\">\r\n              <input\r\n                type=\"number\"\r\n                step={0.01}\r\n                placeholder=\"Search service price\"\r\n                name=\"price\"\r\n                className=\"search-input\"\r\n              />\r\n              <button type=\"submit\" className=\"search-button\">\r\n                <i className=\"fas fa-search\"></i>\r\n              </button>\r\n            </form>\r\n            <form onSubmit={handleSearch} className=\"search-engine\">\r\n              <input\r\n                type=\"date\"\r\n                name=\"date\"\r\n                className=\"search-input\"\r\n              />\r\n              <button type=\"submit\" className=\"search-button\">\r\n                <i className=\"fas fa-check\"></i>\r\n              </button>\r\n            </form>\r\n          </div>\r\n          {loading && (\r\n            <table className=\"text-center\">\r\n              <thead>\r\n                <tr>\r\n                  <td>Loading...</td>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr className=\"bg-[#aaa] animate-pulse text-[#aaa] h-12\">\r\n                  <td>k</td>\r\n                </tr>\r\n                <tr className=\"bg-[#aaa] animate-pulse text-[#aaa] h-12\">\r\n                  <td>k</td>\r\n                </tr>\r\n                <tr className=\"bg-[#aaa] animate-pulse text-[#aaa] h-12\">\r\n                  <td>k</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          )}\r\n          {services.length > 0 ? (\r\n            <table className=\"w-full my-[2rem] m-auto border-collapse text-[1.2rem] overflow-auto\">\r\n              <thead className=\"text-khamco-primary font-bold\">\r\n                <tr className=\"border-[0.2rem] border-khamco-secondary border-t-0 relative\">\r\n                  <td className=\"bg-[#ddd] text-center\">Service</td>\r\n                  <td className=\"bg-[#ddd] text-center\">Price</td>\r\n                  <td className=\"bg-[#ddd] text-center\">Date Created</td>\r\n                  <td className=\"bg-[#ddd] text-center\"></td>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {services.map((service, index) => (\r\n                  <tr\r\n                    key={index}\r\n                    className=\"border-[0.2rem] border-khamco-secondary border-t-0 relative\"\r\n                  >\r\n                    <td className=\"text-center p-[0.5rem]\">\r\n                      {service.service}\r\n                    </td>\r\n                    <td className=\"text-center p-[0.5rem]\">\r\n                      KWD {service.price}\r\n                    </td>\r\n                    <td className=\"text-center p-[0.5rem]\">\r\n                      {new Date(service.date).toLocaleDateString(\"en-us\", {\r\n                        month: \"long\",\r\n                        year: \"numeric\",\r\n                        day: \"numeric\",\r\n                      })}\r\n                    </td>\r\n                    <td className=\"text-center p-[0.5rem]\">\r\n                      <Link to={`/services/${service._id}`}>View</Link>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          ) : (\r\n            <p className=\"text-center\">No services available.</p>\r\n          )}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Services;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}