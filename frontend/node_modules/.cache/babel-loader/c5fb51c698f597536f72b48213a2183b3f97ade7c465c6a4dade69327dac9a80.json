{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import Navbar from\"../../components/Navbar\";import Footer from\"../../components/Footer\";import{Link,useNavigate,useParams}from\"react-router-dom\";import axios from\"axios\";import{toast}from\"react-toastify\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ServicesView=()=>{const{id}=useParams();const[service,setService]=useState({});const apiUrl=window.location.origin.includes(\"localhost\")?\"http://localhost:5000/services\":\"https://khamco-shop-backend.onrender.com/services\";const authKey=localStorage.getItem(\"jwt\");const[loading,setLoading]=useState(true);const navigate=useNavigate();useEffect(()=>{document.title=\"Service Details - Khamco Shop\";const fetchService=async()=>{try{const response=await axios.get(\"\".concat(apiUrl,\"/\").concat(id),{headers:{Authorization:\"Bearer \".concat(authKey)}});setService(response.data.service);setLoading(false);}catch(error){var _error$response,_error$response$data;setLoading(false);setService({});toast.error(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||error.message);}};fetchService();},[apiUrl,authKey]);const handleDelete=async serviceId=>{try{const response=await axios.delete(\"\".concat(apiUrl,\"/\").concat(serviceId),{headers:{Authorization:\"Bearer \".concat(authKey)}});toast.success(response.data.message);navigate(\"/services\");}catch(error){var _error$response2,_error$response2$data;toast.error(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||error.message);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsx(\"main\",{className:\"p-[4rem]\",children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\",children:/*#__PURE__*/_jsxs(Link,{to:\"/services\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-arrow-left\"}),\" Services\"]})}),loading&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"khamco-card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between gap-[2rem] items-center my-[2rem] mx-auto w-full flex-wrap\",children:[new Array(2).fill(null).map((_,index)=>/*#__PURE__*/_jsx(Link,{to:\"\",className:\"py-[2rem] px-[4rem] outline-none border-none bg-[#666] rounded-[0.5rem] animate-pulse\"},\"placeholder-\".concat(index))),/*#__PURE__*/_jsx(\"div\",{className:\"khamco-card w-full bg-[#666] animate-pulse m-auto h-[100vh] my-[2rem]\"})]})})}),service&&/*#__PURE__*/_jsxs(\"div\",{className:\"khamco-card\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"utilities\",children:[/*#__PURE__*/_jsx(Link,{to:\"/services/edit/\".concat(service._id),className:\"edit-btn\",children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDelete(service._id),children:\"Delete\"})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:service.service}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-[1rem]\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Price\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"KWD\",\" \",new Intl.NumberFormat(\"en-US\").format(service.price)||\"--\"]})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date Entered\"}),/*#__PURE__*/_jsx(\"p\",{className:\"capitalize\",children:new Date(service.date).toLocaleDateString(\"en-us\",{month:\"long\",year:\"numeric\",day:\"numeric\"})||\"--\"})]})]})]})]})}),/*#__PURE__*/_jsx(Footer,{})]});};export default ServicesView;","map":{"version":3,"names":["React","useEffect","useState","Navbar","Footer","Link","useNavigate","useParams","axios","toast","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ServicesView","id","service","setService","apiUrl","window","location","origin","includes","authKey","localStorage","getItem","loading","setLoading","navigate","document","title","fetchService","response","get","concat","headers","Authorization","data","error","_error$response","_error$response$data","message","handleDelete","serviceId","delete","success","_error$response2","_error$response2$data","children","className","to","Array","fill","map","_","index","_id","onClick","Intl","NumberFormat","format","price","Date","date","toLocaleDateString","month","year","day"],"sources":["C:/Users/TawandaMsengezi/Documents/Upwork/Osama-Client/Khamco Shop/Shop-1/client/src/pages/services/ServicesView.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Navbar from \"../../components/Navbar\";\r\nimport Footer from \"../../components/Footer\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst ServicesView = () => {\r\n  const { id } = useParams();\r\n  const [service, setService] = useState({});\r\n  const apiUrl = window.location.origin.includes(\"localhost\")\r\n    ? \"http://localhost:5000/services\"\r\n    : \"https://khamco-shop-backend.onrender.com/services\";\r\n  const authKey = localStorage.getItem(\"jwt\");\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    document.title = \"Service Details - Khamco Shop\";\r\n\r\n    const fetchService = async () => {\r\n      try {\r\n        const response = await axios.get(`${apiUrl}/${id}`, {\r\n          headers: { Authorization: `Bearer ${authKey}` },\r\n        });\r\n        setService(response.data.service);\r\n        setLoading(false);\r\n      } catch (error) {\r\n        setLoading(false);\r\n        setService({});\r\n        toast.error(error.response?.data?.message || error.message);\r\n      }\r\n    };\r\n\r\n    fetchService();\r\n  }, [apiUrl, authKey]);\r\n\r\n  const handleDelete = async (serviceId) => {\r\n    try {\r\n      const response = await axios.delete(`${apiUrl}/${serviceId}`, {\r\n        headers: { Authorization: `Bearer ${authKey}` },\r\n      });\r\n      toast.success(response.data.message);\r\n      navigate(\"/services\");\r\n    } catch (error) {\r\n      toast.error(error.response?.data?.message || error.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Navbar />\r\n      <main className=\"p-[4rem]\">\r\n        <section>\r\n          <div className=\"flex justify-between gap-[2rem] items-center my-[2rem] m-auto w-full flex-wrap\">\r\n            <Link to=\"/services\">\r\n              <i className=\"fas fa-arrow-left\"></i> Services\r\n            </Link>\r\n          </div>\r\n          {loading && (\r\n            <>\r\n              <div className=\"khamco-card\">\r\n                <div className=\"flex justify-between gap-[2rem] items-center my-[2rem] mx-auto w-full flex-wrap\">\r\n                  {new Array(2).fill(null).map((_, index) => (\r\n                    <Link\r\n                      key={`placeholder-${index}`}\r\n                      to={``}\r\n                      className=\"py-[2rem] px-[4rem] outline-none border-none bg-[#666] rounded-[0.5rem] animate-pulse\"\r\n                    ></Link>\r\n                  ))}\r\n                  <div className=\"khamco-card w-full bg-[#666] animate-pulse m-auto h-[100vh] my-[2rem]\"></div>\r\n                </div>\r\n              </div>\r\n            </>\r\n          )}\r\n          {service && (\r\n            <div className=\"khamco-card\">\r\n              <div className=\"utilities\">\r\n                <Link to={`/services/edit/${service._id}`} className=\"edit-btn\">\r\n                  Edit\r\n                </Link>\r\n                <button\r\n                  className=\"delete-btn\"\r\n                  onClick={() => handleDelete(service._id)}\r\n                >\r\n                  Delete\r\n                </button>\r\n              </div>\r\n              <h1 className=\"title\">{service.service}</h1>\r\n              <div className=\"flex flex-col gap-[1rem]\">\r\n                <span className=\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\">\r\n                  <strong>Price</strong>\r\n                  <p>\r\n                    KWD{\" \"}\r\n                    {new Intl.NumberFormat(\"en-US\").format(service.price) ||\r\n                      \"--\"}\r\n                  </p>\r\n                </span>\r\n                <span className=\"inline-flex justify-start gap-[2rem] text-balance flex-wrap capitalize\">\r\n                  <strong>Date Entered</strong>\r\n                  <p className=\"capitalize\">\r\n                    {new Date(service.date).toLocaleDateString(\"en-us\", {\r\n                      month: \"long\",\r\n                      year: \"numeric\",\r\n                      day: \"numeric\",\r\n                    }) || \"--\"}\r\n                  </p>\r\n                </span>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </section>\r\n      </main>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ServicesView;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}